{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  meals: [],\n  totalAmount: 0\n};\nexport const mealSlice = createSlice({\n  name: \"meal\",\n  initialState: initialState,\n  reducers: {\n    //Add meal\n    addMeal: (state, action) => {\n      //Updates total amount\n      state.totalAmount += action.payload.price * action.payload.amount; //Finds item in array\n\n      const existingCartItemIndex = state.meals.findIndex(item => item.id === action.payload.id);\n      const existingCartItem = state.meals[existingCartItemIndex]; //If exists, add amount\n\n      if (existingCartItem) {\n        const updatedItem = { ...existingCartItem,\n          amount: existingCartItem.amount + action.payload.amount\n        };\n        state.meals = state.meals.map(meal => {\n          if (meal.id === action.payload.id) return updatedItem;else return meal;\n        });\n      } //If not, add to cart\n      else {\n        state.meals = state.meals.concat(action.payload);\n      }\n    },\n    //Remove meal\n    removeMeal: (state, action) => {\n      //Finds item in array\n      const existingCartItemIndex = state.meals.findIndex(item => item.id === action.payload);\n      const existingCartItem = state.meals[existingCartItemIndex]; //Updates total amount\n\n      state.totalAmount -= existingCartItem.price; //If only 1, remove\n\n      if (existingCartItem.amount === 1) {\n        state.meals = state.meals.filter(item => item.id !== action.payload);\n      } //If not, subtract one from amount\n      else {\n        const updatedItem = { ...existingCartItem,\n          amount: existingCartItem.amount - 1\n        };\n        state.meals = state.meals.map(meal => {\n          if (meal.id === action.payload) return updatedItem;else return meal;\n        });\n      }\n    },\n    //Empty cart\n    emptyCart: state => {\n      state.meals = [];\n      state.totalAmount = 0;\n    }\n  }\n});\nexport const {\n  addMeal,\n  removeMeal,\n  emptyCart\n} = mealSlice.actions;\nexport const selectMeal = state => state.meals.meals.values;\nexport default mealSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","meals","totalAmount","mealSlice","name","reducers","addMeal","state","action","payload","price","amount","existingCartItemIndex","findIndex","item","id","existingCartItem","updatedItem","map","meal","concat","removeMeal","filter","emptyCart","actions","selectMeal","values","reducer"],"sources":["/Users/bearhugeteddy/Desktop/food/src/app/mealSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport type { RootState } from \"./store\";\nimport IMeal from \"../types/IMeal\";\n\ninterface MealState {\n  meals: IMeal[];\n  totalAmount: number;\n}\n\nconst initialState: MealState = {\n  meals: [],\n  totalAmount: 0,\n};\n\nexport const mealSlice = createSlice({\n  name: \"meal\",\n  initialState: initialState,\n  reducers: {\n    //Add meal\n    addMeal: (state, action: PayloadAction<IMeal>) => {\n      //Updates total amount\n      state.totalAmount += action.payload.price * action.payload.amount;\n      //Finds item in array\n      const existingCartItemIndex = state.meals.findIndex(\n        (item) => item.id === action.payload.id\n      );\n      const existingCartItem = state.meals[existingCartItemIndex];\n      //If exists, add amount\n      if (existingCartItem) {\n        const updatedItem = {\n          ...existingCartItem,\n          amount: existingCartItem.amount + action.payload.amount,\n        };\n        state.meals = state.meals.map((meal) => {\n          if (meal.id === action.payload.id) return updatedItem;\n          else return meal;\n        });\n      }\n      //If not, add to cart\n      else {\n        state.meals = state.meals.concat(action.payload);\n      }\n    },\n    //Remove meal\n    removeMeal: (state, action: PayloadAction<string>) => {\n      //Finds item in array\n      const existingCartItemIndex = state.meals.findIndex(\n        (item) => item.id === action.payload\n      );\n      const existingCartItem = state.meals[existingCartItemIndex];\n      //Updates total amount\n      state.totalAmount -= existingCartItem.price;\n      //If only 1, remove\n      if (existingCartItem.amount === 1) {\n        state.meals = state.meals.filter((item) => item.id !== action.payload);\n      }\n      //If not, subtract one from amount\n      else {\n        const updatedItem = {\n          ...existingCartItem,\n          amount: existingCartItem.amount - 1,\n        };\n        state.meals = state.meals.map((meal) => {\n          if (meal.id === action.payload) return updatedItem;\n          else return meal;\n        });\n      }\n    },\n    //Empty cart\n    emptyCart: (state) => {\n      state.meals = [];\n      state.totalAmount = 0;\n    },\n  },\n});\n\nexport const { addMeal, removeMeal, emptyCart } = mealSlice.actions;\nexport const selectMeal = (state: RootState) => state.meals.meals.values;\nexport default mealSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}